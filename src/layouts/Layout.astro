---
import AppFooter from "../components/AppFooter.astro";
import AppHeader from "../components/AppHeader.astro";

interface Props {
    title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="generator" content={Astro.generator} />
        <meta
            name="description"
            content="Explore cutting-edge solutions with our premier software development company. From custom applications to innovative web and mobile solutions, we deliver tailored software to propel your business forward. Discover excellence in code, design, and functionality with MSAR dev."
        />
        <title>{title} | Morse Software and Research (msar.dev)</title>

        <link
            href="https://fonts.googleapis.com/css2?family=Urbanist:wght@400;500;600;700&display=swap"
            rel="stylesheet"
        />
    </head>
    <body class="bg-white dark:bg-gray-900">
        <AppHeader />
        <slot />
        <AppFooter />
    </body>
</html>
<style>
    html {
        font-family: Urbanist, sans-serif;
        scroll-behavior: smooth;
    }

    body {
        margin: 0;
    }
</style>

<script is:inline>
const getTheme = () => {
    if (
        typeof localStorage !== "undefined" &&
        localStorage.getItem("theme")
    ) {
        return localStorage.getItem("theme");
    }
    if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
        return "dark";
    }
    return "light";
};

const toggleTheme = () => {
    const theme = getTheme();
    console.log("toggle theme");
    const newTheme = theme === "dark" ? "light" : "dark";
    if (newTheme === "light") {
        document.documentElement.classList.remove("dark");
    } else {
        document.documentElement.classList.add("dark");
    }
    window.localStorage.setItem("theme", newTheme);
    const button = document.getElementById("theme-toggle");
    button.innerHTML = newTheme === "dark" ? "ðŸŒž" : "ðŸŒ™";

    console.log("new theme", newTheme);
};

(function () {
    const theme = getTheme();
    if (theme === "light") {
        document.documentElement.classList.remove("dark");
    } else {
        document.documentElement.classList.add("dark");
    }
    window.localStorage.setItem("theme", theme);
    const button = document.getElementById("theme-toggle");
    button.innerHTML = theme === "dark" ? "ðŸŒž" : "ðŸŒ™";
})();
</script>
